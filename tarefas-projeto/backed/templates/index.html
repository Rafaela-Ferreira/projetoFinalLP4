<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>App Tarefas</title>
</head>
<body>
  <h1>Minhas Tarefas</h1>
  <div>
    <h2>Criar Tarefa</h2>
    <input id="titulo" placeholder="TÃ­tulo">
    <input id="usuario_id" placeholder="UsuÃ¡rio ID" type="number">
    <input id="categoria_id" placeholder="Categoria ID (opcional)" type="number">
    <button id="criar">Criar</button>
  </div>
  <hr>
  <div>
    <h2>Lista</h2>
    <button id="carregar">Carregar tarefas</button>
    <ul id="lista"></ul>
  </div>

  <script>
    // Criar tarefa
    document.getElementById("criar").onclick = async () => {
      const titulo = document.getElementById("titulo").value;
      const usuario_id = document.getElementById("usuario_id").value;
      const categoria_id = document.getElementById("categoria_id").value;

      const body = { titulo, usuario_id: Number(usuario_id) };
      if (categoria_id) body.categoria_id = Number(categoria_id);

      const res = await fetch("/tarefas", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(body)
      });

      alert("Tarefa criada!");
    };

    // Listar tarefas
    document.getElementById("carregar").onclick = async () => {
      const res = await fetch("/tarefas");
      const lista = await res.json();

      const ul = document.getElementById("lista");
      ul.innerHTML = "";

      lista.forEach(t => {
        const li = document.createElement("li");
        li.textContent = `${t.id} - ${t.titulo} (status: ${t.status})`;
        ul.appendChild(li);
      });
    };
  </script>
</body>
</html>
